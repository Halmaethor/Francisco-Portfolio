'use strict';(function(){function a(e){if(!(this instanceof a))return new a(e);if(!e)throw Error("No DOM elements passed into Touche");this.nodes=e;return this}var c="ontouchstart"in window||"msmaxtouchpoints"in window.navigator;a.prototype.on=function(a,b){var f,d=this.nodes,g=d.length,h;c&&"click"===a&&(f=!0);h=function(a,e,c){var b,d=function(){!b&&(b=!0)&&c.apply(this,arguments)};a.addEventListener(e,d,!1);f&&a.addEventListener("touchend",d,!1)};if(g)for(;g--;)h(d[g],a,b);else h(d,a,b);return this};
window.Touche=a;if(window.jQuery&&c){var b=jQuery.fn.on,k=jQuery.fn.off,f=function(a){return"click"==a.slice(0,5)?a.replace("click","touchend"):a};jQuery.fn.on=function(){arguments[0]=f(arguments[0]);b.apply(this,arguments);return this};jQuery.fn.off=function(){arguments[0]=f(arguments[0]);k.apply(this,arguments);return this}}})();var scrollTween=new TweenLite(window,1,{scrollTo:0,ease:Quart.easeInOut,paused:!0});$("a.scroller").on("click",gotoSection);
function gotoSection(){var a=$(this).attr("data-section");scrollTween.pause().invalidate();scrollTween.vars.scrollTo=$(a).offset().top;scrollTween.restart();return!1}
for(var projectTemplate='<div class="project"> \t<div class="project-header"> \t\t<img src="img/project_corner.png" alt=""> \t\t{{name}} \t</div> \t<div class="project-content"> \t\t<img src="img/projects/{{image}}" alt="" class="project-image"> \t\t<div class="project-details"> \t\t\t<p class="project-description">{{description}}</p> \t\t\t<div class="project-footer"></div> \t\t</div> \t</div> </div>',projectsContainer=$("#projects"),projectsShowMore=$("#show-more-projects"),x=0;x<numVisibleProjects;++x)projectsContainer.append(Mustache.render(projectTemplate,
projects[x]));projectsContainer.find(".project").addClass("project-visible");for(x=numVisibleProjects;x<projects.length;++x)projectsContainer.append(Mustache.render(projectTemplate,projects[x]));
var projectsHidden=projectsContainer.find(".project:not(.project-visible)"),projectsTween=TweenLite.fromTo(projectsContainer.get(0),1,{css:{height:0}},{css:{height:0},ease:Quart.easeInOut,paused:!0,onStart:function(){projectsContainer.addClass("in-transition")},onComplete:function(){projectsContainer.removeAttr("style");projectsShowMore.text("Show less projects");projectsContainer.addClass("projects-open");projectsContainer.removeClass("in-transition")},onReverseComplete:function(){projectsHidden.hide();
projectsContainer.removeAttr("style");projectsShowMore.text("Show more projects");projectsContainer.removeClass("projects-open");projectsContainer.removeClass("in-transition")}});projectsHidden.hide();projectsContainer.removeAttr("style");
if(projects.length<=numVisibleProjects)projectsShowMore.hide();else projectsShowMore.on("click",function(){if(projectsContainer.hasClass("in-transition"))return!1;var a=getProjectsSmallHeight();projectsTween.invalidate();projectsTween.vars.startAt.css.height=a;projectsContainer.hasClass("projects-open")?(projectsTween.vars.css.height=getProjectsBigHeight(),projectsTween.reverse()):(projectsContainer.css("height",a),projectsHidden.show(),projectsTween.vars.css.height=getProjectsBigHeight(),projectsTween.play());
return!1});function getProjectsSmallHeight(){var a=projectsContainer.find(".project:nth("+(numVisibleProjects-1)+")");return Math.ceil(a.position().top+a.outerHeight())+20}function getProjectsBigHeight(){var a=projectsContainer.find(".project:last");return Math.ceil(a.position().top+a.outerHeight())+20}$(".project").on("touchend",function(){$(this).toggleClass("active")});
$(".submit-button a").on("click",function(){var a="[WORK PROPOSAL]",c=$('[name="person-name"]').val(),b=$('[name="company-name"]').val();""!==b?(a+=" "+b,""!==c&&(a+=" - "+c)):""!==c&&(a+=" "+c);window.location=$(this).attr("href")+"?subject="+encodeURIComponent(a)+"&body="+encodeURIComponent($("[name=body]").val());return!1});
